webpackJsonp([4],{BrJe:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{loading:!1,showPage:1,nowPage:1,pageSize:10,item:{content:[]},searchObj:{dateType:"",from:"",to:"",source:[],sort:1,custom:"",keyword:this.$route.query.keyword?this.$route.query.keyword:""},timeList:[{label:"全部",value:""},{label:"今日",value:"today"},{label:"24小时",value:"24"},{label:"近3天",value:"3d"},{label:"近1周",value:"1w"},{label:"近1月",value:"1m"},{label:"自定义",value:"custom"}],orderList:[{label:"时间降序",value:1},{label:"时间升序",value:2},{label:"采集顺序",value:3}],sourceList:[],activeMsg:{},dialogVisible:!1}},created:function(){this.getSource()},methods:{init:function(e){var t=this;this.item={content:[]},this.nowPage=e;var a={},s="A_S_SENTIMENT_ITEM";2===this.showPage?(a={page:e,pageSize:this.pageSize},s="A_S_FAVOR_ITEM"):a=this.getParams(),this.loading=!0,this.$http.get({api:s,params:a,loading:this.loading,callback:function(e){t.loading=!1,e.content=t.$lib.highLight(e.content,t.searchObj.keyword),t.item=e}})},getParams:function(){if(this.searchObj.source.length<1)throw this.$bus.$emit("alert",{text:"请选择来源！"}),new Error("请选择来源！");var e={pageSize:this.pageSize,page:this.nowPage,dateType:this.searchObj.dateType,sort:this.searchObj.sort,keyword:this.searchObj.keyword,source:this.searchObj.source.join()};if("custom"===e.dateType){var t=this.searchObj.custom;if(!(t&&t.length>1))throw this.$bus.$emit("alert",{text:"请选择自定义时间！"}),new Error("请选择自定义时间！");e.from=t[0],e.to=t[1]}else e.from="",e.to="";return e},del:function(e){var t=this;this.$bus.$emit("confirm",{text:"此操作将永久删除该信息, 是否继续?",callback:function(){t.deleteEvent(e)}})},deleteEvent:function(e){var t=this;this.loading=!0,this.$http.delete({api:"A_S_SENTIMENT_DELETE",params:{id:e},loading:this.loading,callback:function(e){t.loading=!1,t.init(1)}})},favor:function(e,t){var a=this;this.$http.get({api:"A_S_SENTIMENT_FAVOR",params:{id:e,eventId:t},callback:function(e){a.init(1)}})},getSource:function(){var e=this;this.$http.get({api:"A_S_SOURCE_ITEM",params:{},callback:function(t){t.map(function(t){e.searchObj.source.push(t.name)}),e.sourceList=t,e.init(1)}})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sys-main"},[a("div",{staticClass:"contentbox"},[a("div",{staticClass:"panel"},[a("div",{staticClass:"panel-heading"},[a("div",{staticClass:"panel-title"},[e._v("质量舆情列表\n          "),a("a",{directives:[{name:"show",rawName:"v-show",value:1==e.showPage,expression:"showPage==1"}],attrs:{href:"javascript:void(0)"},on:{click:function(t){e.showPage=2,e.init(1)}}},[e._m(0)]),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:2==e.showPage,expression:"showPage==2"}],attrs:{href:"javascript:void(0)"},on:{click:function(t){e.showPage=1,e.init(1)}}},[e._m(1)])])]),e._v(" "),a("div",{staticClass:"panel-body"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.showPage,expression:"showPage==1"}],staticClass:"casesearch"},[a("ul",[a("li",[a("span",{staticClass:"spantitle"},[e._v("时间范围：")]),e._v(" "),a("el-select",{staticStyle:{width:"100px"},model:{value:e.searchObj.dateType,callback:function(t){e.$set(e.searchObj,"dateType",t)},expression:"searchObj.dateType"}},e._l(e.timeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"custom"==e.searchObj.dateType,expression:"searchObj.dateType=='custom'"}],staticStyle:{float:"right","margin-left":"5px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.searchObj.custom,callback:function(t){e.$set(e.searchObj,"custom",t)},expression:"searchObj.custom"}})],1),e._v(" "),a("li",[a("span",{staticClass:"spantitle"},[e._v("文章排序：")]),e._v(" "),a("el-select",{staticStyle:{width:"120px"},model:{value:e.searchObj.sort,callback:function(t){e.$set(e.searchObj,"sort",t)},expression:"searchObj.sort"}},e._l(e.orderList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("li",[a("span",{staticClass:"spantitle"},[e._v("来源选择：")]),e._v(" "),a("el-checkbox-group",{staticStyle:{width:"600px",height:"40px","line-height":"40px"},model:{value:e.searchObj.source,callback:function(t){e.$set(e.searchObj,"source",t)},expression:"searchObj.source"}},e._l(e.sourceList,function(e,t){return a("el-checkbox",{key:t,attrs:{label:e.name}})}))],1),e._v(" "),a("li",[a("el-input",{attrs:{placeholder:"请输入关键词"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.init(1)}},model:{value:e.searchObj.keyword,callback:function(t){e.$set(e.searchObj,"keyword",t)},expression:"searchObj.keyword"}})],1),e._v(" "),a("li",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.init(1)}}},[e._v("查询")])],1)])]),e._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticClass:"table table-striped",staticStyle:{width:"100%"},attrs:{data:e.item.content,stripe:""}},[a("el-table-column",{attrs:{width:"60","show-overflow-tooltip":"",label:"序号",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.$index+1+(e.nowPage-1)*e.pageSize)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"300","show-overflow-tooltip":"",label:"热点内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("h3",[a("a",{attrs:{href:"javascript:void(0)"},domProps:{innerHTML:e._s(t.row.title)},on:{click:function(a){e.dialogVisible=!0,e.activeMsg=t.row}}})]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:""!=t.row.keyword,expression:"scope.row.keyword!=''"}]},[e._v("关键字："),a("span",{domProps:{innerHTML:e._s(t.row.keyword)}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"content",width:"500","show-overflow-tooltip":"",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(t.row.content)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"source",width:"200","show-overflow-tooltip":"",label:"来源网站"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(t.row.source)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"publishTime",width:"200","show-overflow-tooltip":"",label:"发布时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(t.row.publishTime)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100","show-overflow-tooltip":"",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"oprate"},[a("a",{directives:[{name:"show",rawName:"v-show",value:!t.row.favorited,expression:"!scope.row.favorited"}],attrs:{href:"javascript:void(0)"},on:{click:function(a){e.favor(t.row.id,1)}}},[a("i",{staticClass:"icon-favorite",attrs:{title:"收藏"}})]),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:t.row.favorited,expression:"scope.row.favorited"}],staticClass:"active",attrs:{href:"javascript:void(0)"},on:{click:function(a){e.favor(t.row.id,0)}}},[a("i",{staticClass:"icon-favorite",attrs:{title:"去掉收藏"}})])])]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.item.totalRecord>e.pageSize,expression:"item.totalRecord>pageSize"}],staticClass:"pagebar"},[a("div",{staticClass:"pageinfo"},[e._v("共有"+e._s(e.item.totalRecord)+"条记录，每页显示"+e._s(e.pageSize)+"条")]),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.item.totalRecord,"page-size":e.pageSize,"current-page":e.nowPage},on:{"current-change":e.init,"update:currentPage":function(t){e.nowPage=t}}})],1)],1)])]),e._v(" "),a("el-dialog",{attrs:{title:e.activeMsg.title,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v(e._s(e.activeMsg.content))]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"panel-sub-title"},[t("i",{staticClass:"icon-favorite"}),this._v("收藏列表")])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"panel-sub-title"},[t("i",{staticClass:"icon-reply"}),this._v("返回")])}]};var o=a("VU/8")(s,i,!1,function(e){a("hItz")},"data-v-e17a86c6",null);t.default=o.exports},hItz:function(e,t){}});
//# sourceMappingURL=4.1140f9a7949c30e06a40.js.map